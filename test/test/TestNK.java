/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package test;

import bitmap.spectrum.CIESpectrum;
import bitmap.spectrum.D65Spectrum;
import bitmap.spectrum.NKSpectrum;
import bitmap.spectrum.RGBSpectrum;
import bitmap.spectrum.XYZSpectrum;
import bitmap.spectrum.generic.IntensitySpectrum;
import bitmap.spectrum.generic.TristimulusSpectrum;
import bitmap.spectrum.surface.ConductorFresnel;

/**
 *
 * @author jmburu
 */
public class TestNK {
    public static void main(String... args)
    {
        //gold
        float[] n = new float[]{
            1.68793714334384f,1.67856826505408f,1.67071985276466f,1.66431831639593f,1.65789273927393f,1.64964191419142f,
            1.64139108910891f,1.63356771929825f,1.6265501754386f,1.61953263157895f,1.60721867836794f,1.58953579147292f,
            1.5718529045779f,1.54363888041954f,1.50217293737423f,1.46070699432892f,1.41750897457675f,1.36541679406602f,
            1.31332461355529f,1.26123243304456f,1.18809394987942f,1.10263730732935f,1.01718066477928f,0.931724022229213f,
            0.855184048782849f,0.780654696801045f,0.706125344819242f,0.631595992837439f,0.576661145986376f,0.530803882284849f,
            0.484946618583322f,0.439089354881795f,0.398254193706379f,0.378663156605853f,0.359072119505326f,0.3394810824048f,
            0.319890045304273f,0.303710747238174f,0.295843899259392f,0.28797705128061f,0.280110203301828f,0.272243355323046f,
            0.264376507344264f,0.256509659365482f,0.2486428113867f,0.240775963407918f,0.232909115429137f,0.225042267450354f,
            0.217175419471573f,0.209308571492791f,0.201441723514009f,0.193574875535227f,0.185708027556445f,0.177841179577663f,
            0.169974331598881f,0.165590532936114f,0.164762992386627f,0.16393545183714f,0.163107911287653f,0.162280370738166f,
            0.161452830188679f,0.160625289639192f,0.160120643696318f,0.160614275841643f,0.161107907986968f,0.161601540132293f,
            0.162095172277619f,0.162588804422944f,0.163082436568269f,0.163576068713595f,0.164154889098528f,0.165251837388386f,
            0.166348785678243f,0.167445733968101f,0.168542682257958f,0.169639630547816f,0.170736578837674f,0.171833527127531f,
            0.172930475417389f,0.174033876650277f,0.17538894266135f};
        
        float[] k = new float[]{
            1.91699480453113f,1.92977054765352f,1.94010018404417f,1.94810210450508f,1.9560097509751f,1.9567598259826f,1.9575099009901f,
            1.95581094736842f,1.94949515789474f,1.94317936842105f,1.93414578557862f,1.92235719431528f,1.91056860305194f,1.89616952253186f,
            1.8784855174096f,1.86080151228733f,1.84369265613499f,1.82953717230055f,1.81538168846611f,1.80122620463167f,1.80327566320646f,
            1.81480968858131f,1.82634371395617f,1.83787773933103f,1.89528722837923f,1.96304118472632f,2.03079514107342f,2.09854909742051f,
            2.18389475090156f,2.27739014291439f,2.37088553492721f,2.46438092694003f,2.55326639728991f,2.62265132035427f,2.69203624341864f,
            2.761421166483f,2.83080608954737f,2.88441498746923f,2.89958676571403f,2.91475854395882f,2.92993032220362f,2.94510210044841f,
            2.9602738786932f,2.975445656938f,2.99061743518279f,3.00578921342759f,3.02096099167238f,3.03613276991717f,3.05130454816197f,
            3.06647632640676f,3.08164810465155f,3.09681988289635f,3.11199166114114f,3.12716343938594f,3.14233521763073f,3.194358931921f,
            3.28400915811541f,3.37365938430983f,3.46330961050425f,3.55295983669866f,3.64261006289308f,3.7322602890875f,3.81658850824366f,
            3.88446292822589f,3.95233734820811f,4.02021176819034f,4.08808618817257f,4.1559606081548f,4.22383502813703f,4.29170944811926f,
            4.35789934402492f,4.41384370680766f,4.4697880695904f,4.52573243237314f,4.58167679515588f,4.63762115793862f,4.69356552072135f,
            4.74950988350409f,4.80545424628683f,4.86128247318905f,4.91258140075109f
        };
        
        NKSpectrum ns = new NKSpectrum();
        ns.setTo(n);
        NKSpectrum ks = new NKSpectrum();
        ks.setTo(k);
        
        ConductorFresnel<NKSpectrum> conductor = new ConductorFresnel(ns, ks);        
        NKSpectrum reflectance =  conductor.evaluateSpectrum(1);
                        
        D65Spectrum daylight = new D65Spectrum(); 
        IntensitySpectrum reflected = reflectance.mul(daylight);
        
        CIESpectrum tristimulus = new CIESpectrum();
        XYZSpectrum chromaticity = tristimulus.spectrumToXYZ(reflected);
        chromaticity.setY(0.85f);
        
        RGBSpectrum color = chromaticity.getRGBSpectrum();
        
        System.out.println(reflected);
        System.out.println(daylight);
        System.out.println(color);
    }
}
